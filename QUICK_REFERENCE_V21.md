# üìã QUICK REFERENCE V2.1 - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–î–∞—Ç–∞:** 21 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 2.1  
**–í—Ä–µ–º—è –Ω–∞ —á—Ç–µ–Ω–∏–µ:** 5 –º–∏–Ω—É—Ç

---

## üéØ –°–£–¢–¨ –ò–ó–ú–ï–ù–ï–ù–ò–ô

| –ß—Ç–æ | –ë—ã–ª–æ (‚ùå) | –°—Ç–∞–ª–æ (‚úÖ) |
|-----|----------|-----------|
| **–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** | sentence-transformers (mini-LLM) | Google Gemini API (text-embedding-001) |
| **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å** | 384 | **384** |
| **–¢–∏–ø –ø–æ–∏—Å–∫–∞** | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π + –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ | –¢–æ–ª—å–∫–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | –ü–æ–∏—Å–∫ ‚Üí –§–∏–ª—å—Ç—Ä—ã | –ü–æ–∏—Å–∫ ‚Üí TOP-50 ‚Üí –§–∏–ª—å—Ç—Ä—ã ‚Üí TOP-10 |
| **–í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π** | –ù–µ—Ç | –î–∞ (FAS_arguments=1.0, violation_summary=0.8, addescription=0.6) |
| **–§–∏–ª—å—Ç—Ä—ã** | –î–æ –ø–æ–∏—Å–∫–∞ | **–ü–æ—Å–ª–µ –ø–æ–∏—Å–∫–∞** |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** | 10-20 | –†–æ–≤–Ω–æ 10 |

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –†–ê–ó–ú–ï–†–ù–û–°–¢–¨ 384

**–≠—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –í–ï–ó–î–ï:**

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Å—Ç–∞—Ä—ã–π –∫–æ–¥)
embeddings = np.zeros((7283, 384))
model = SentenceTransformer('all-MiniLM-L6-v2')

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–Ω–æ–≤—ã–π –∫–æ–¥)
embeddings = np.zeros((7283, 384))
result = genai.embed_content(
    model="models/text-embedding-001",
    content=text
)
```

**–ì–¥–µ –∏—Å–∫–∞—Ç—å 384:**
- `backend/embeddings.py`
- `backend/search.py`
- `backend/database_init.py`
- –í—Å–µ —Ñ–∞–π–ª—ã —Å numpy arrays –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –í—Å–µ SQL-–∑–∞–ø—Ä–æ—Å—ã —Å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é –≤–µ–∫—Ç–æ—Ä–æ–≤

---

## üîÑ –ú–ò–ì–†–ê–¶–ò–Ø: SENTENCE-TRANSFORMERS ‚Üí GOOGLE GEMINI

### –®–∞–≥ 1: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ
```bash
pip uninstall sentence-transformers transformers torch
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ–µ
```bash
pip install google-generativeai
```

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç—å API Key
```
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://aistudio.google.com
2. –°–æ–∑–¥–∞—Ç—å API Key
3. –î–æ–±–∞–≤–∏—Ç—å –≤ .env: GOOGLE_API_KEY=your_key_here
```

### –®–∞–≥ 4: –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥

**–ë—ã–ª–æ:**
```python
from sentence_transformers import SentenceTransformer

class EmbeddingService:
    def __init__(self):
        self.model = SentenceTransformer('all-MiniLM-L6-v2')
    
    def embed_text(self, text):
        return self.model.encode(text)
```

**–°—Ç–∞–ª–æ:**
```python
import google.generativeai as genai
import os

class EmbeddingService:
    def __init__(self):
        genai.configure(api_key=os.getenv("GOOGLE_API_KEY"))
    
    def embed_text(self, text):
        result = genai.embed_content(
            model="models/text-embedding-001",
            content=text,
            task_type="retrieval_document"
        )
        return result['embedding']  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 384 —á–∏—Å–µ–ª
```

---

## üéØ –ù–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–û–ò–°–ö–ê

### –°—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ùå)
```
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (—Ä–µ–≥–∏–æ–Ω, –≥–æ–¥, —Å—Ç–∞—Ç—å—è)
2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–º
3. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (fallback)
4. –í–µ—Ä–Ω—É—Ç—å 10-20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚úÖ)
```
1. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –í–°–ï–ú –¥–æ–∫—É–º–µ–Ω—Ç–∞–º ‚Üí TOP-50
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∫ TOP-50
3. –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –ø–æ–ª—è–º)
4. –í–µ—Ä–Ω—É—Ç—å —Ä–æ–≤–Ω–æ TOP-10
```

### –ü—Å–µ–≤–¥–æ–∫–æ–¥
```python
def search(query, filters):
    # 1. –°–æ–∑–¥–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞
    query_embedding = embedding_service.embed_text(query)
    
    # 2. –ù–∞–π—Ç–∏ TOP-50 –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É (–ë–ï–ó —Ñ–∏–ª—å—Ç—Ä–æ–≤)
    top_50 = vector_search(query_embedding, limit=50)
    
    # 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∫ TOP-50
    filtered = apply_filters(top_50, filters)
    
    # 4. –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—è–º
    scored = calculate_weighted_scores(filtered, query_embedding)
    
    # 5. –í–µ—Ä–Ω—É—Ç—å TOP-10
    return scored[:10]
```

---

## ‚öñÔ∏è –í–ó–í–ï–®–ï–ù–ù–ê–Ø –†–ï–õ–ï–í–ê–ù–¢–ù–û–°–¢–¨

### –§–æ—Ä–º—É–ª–∞
```
S = (1.0 √ó R_FAS_arguments) + (0.8 √ó R_violation_summary) + (0.6 √ó R_addescription)
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞
```python
# –î–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –æ—Ü–µ–Ω–∫–∏:
scores = {
    'FAS_arguments': 0.9,
    'violation_summary': 0.5,
    'addescription': 0.8
}

# –í–∑–≤–µ—à–µ–Ω–Ω—ã–π –±–∞–ª–ª:
final_score = (1.0 * 0.9) + (0.8 * 0.5) + (0.6 * 0.8)
            = 0.9 + 0.4 + 0.48
            = 1.78
```

### –ö–æ–¥
```python
def calculate_weighted_score(doc, query_embedding):
    weights = {
        'FAS_arguments': 1.0,
        'violation_summary': 0.8,
        'addescription': 0.6
    }
    
    total_score = 0.0
    for field, weight in weights.items():
        field_embedding = doc[f'{field}_embedding']
        similarity = cosine_similarity(query_embedding, field_embedding)
        total_score += weight * similarity
    
    return total_score
```

---

## üîç –°–ò–°–¢–ï–ú–ê –§–ò–õ–¨–¢–†–û–í

### 4 —Ñ–∏–ª—å—Ç—Ä–∞ (–ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ü–û–°–õ–ï –ø–æ–∏—Å–∫–∞)

| –§–∏–ª—å—Ç—Ä | –ü–æ–ª–µ –ë–î | –õ–æ–≥–∏–∫–∞ | –ü—Ä–∏–º–µ—Ä |
|--------|---------|--------|--------|
| **–ì–æ–¥ —Ä–µ—à–µ–Ω–∏—è** | `document_date` | –ì–æ–¥ –∏–∑ –¥–∞—Ç—ã | 2023 |
| **–†–µ–≥–∏–æ–Ω** | `FASdivision` | –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ | "–ú–æ—Å–∫–≤–∞" |
| **–û—Ç—Ä–∞—Å–ª—å** | `defendant_industry` | –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ | "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª—É–≥–∏" |
| **–°—Ç–∞—Ç—å—è** | `legal_provisions` | –°–æ–¥–µ—Ä–∂–∏—Ç | "—Å—Ç. 5" |

### –õ–æ–≥–∏–∫–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ú–µ–∂–¥—É —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:** AND (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ)
- **–í–Ω—É—Ç—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞:** OR (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π)

**–ü—Ä–∏–º–µ—Ä:**
```
–ì–æ–¥ = 2023 AND (–†–µ–≥–∏–æ–Ω = –ú–æ—Å–∫–≤–∞ OR –†–µ–≥–∏–æ–Ω = –°–ü–±) AND –°—Ç–∞—Ç—å—è —Å–æ–¥–µ—Ä–∂–∏—Ç "5"
```

### –ö–æ–¥
```python
def apply_filters(documents, filters):
    filtered = documents
    
    if filters.get('year'):
        filtered = [d for d in filtered 
                    if d['document_date'].year in filters['year']]
    
    if filters.get('region'):
        filtered = [d for d in filtered 
                    if d['FASdivision'] in filters['region']]
    
    if filters.get('industry'):
        filtered = [d for d in filtered 
                    if d['defendant_industry'] in filters['industry']]
    
    if filters.get('article'):
        filtered = [d for d in filtered 
                    if any(art in d['legal_provisions'] 
                           for art in filters['article'])]
    
    return filtered
```

---

## üß™ –ó–û–õ–û–¢–û–ô –°–¢–ê–ù–î–ê–†–¢ (20 –¢–ï–°–¢–û–í)

### –ß—Ç–æ —ç—Ç–æ
20 –ø–∞—Ä "–ó–∞–ø—Ä–æ—Å ‚Üí –≠—Ç–∞–ª–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞.

### –ü—Ä–∏–º–µ—Ä—ã

| # | –ó–∞–ø—Ä–æ—Å | –≠—Ç–∞–ª–æ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ |
|---|--------|------------------|
| 1 | Email —Ä–∞—Å—Å—ã–ª–∫–∞ —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º | https://br.fas.gov.ru/cases/7a8d4344... |
| 2 | –°–∞–π—Ç –∞–ø—Ç–µ–∫–∏ —Å —Ü–µ–Ω–∞–º–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–æ–π | https://br.fas.gov.ru/cases/202e6e0c... |
| 3 | –ú–§–û –±–µ–∑ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π | https://br.fas.gov.ru/cases/0b0d2ee6... |

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
```python
# –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–∏—Å–∫–µ:
for query, expected_url in golden_standard:
    results = search(query)
    assert expected_url in [r['url'] for r in results[:10]], \
        f"Expected {expected_url} not found for query: {query}"
```

---

## üìù UX –¢–ï–ö–°–¢–´

### –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
```
–ü–æ–∏—Å–∫ –ø—Ä–∞–∫—Ç–∏–∫–∏ –§–ê–° –ø–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è–º –≤ —Ä–µ–∫–ª–∞–º–µ
```

### –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
```
–£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ 7000+ —Ä–µ—à–µ–Ω–∏–π: –Ω–∞—Ö–æ–¥–∏—Ç –∫–µ–π—Å—ã –ø–æ —Å–º—ã—Å–ª—É, 
–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.
```

### –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –ø–æ–∏—Å–∫–∞
```
–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Ä–µ–∫–ª–∞–º—ã. 
–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´—Ç–æ–≤–∞—Ä ‚Ññ1 –≤ –†–æ—Å—Å–∏–∏¬ª –∏–ª–∏ ¬´–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –≤—Ä–∞—á–∞¬ª
```

### –ü—É—Å—Ç–∞—è –≤—ã–¥–∞—á–∞
```
–ó–∞–≥–æ–ª–æ–≤–æ–∫: –ú—ã –Ω–µ –Ω–∞—à–ª–∏ —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π.

–¢–µ–∫—Å—Ç:
–ü–æ—Ö–æ–∂–µ, —Ç–∞–∫–∏—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ –≤ –Ω–∞—à–µ–π –±–∞–∑–µ –∏–∑ 7000 –¥–µ–ª –µ—â–µ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª–æ—Å—å.

–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- –ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å –±–æ–ª–µ–µ –æ–±—â–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
- –û–ø–∏—à–∏—Ç–µ —Å—É—Ç—å, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª–æ–≥–∞–Ω
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ò–ó–ú–ï–ù–ï–ù–ò–ô

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ):
- [ ] –ó–∞–º–µ–Ω–∏–ª–∏ sentence-transformers –Ω–∞ Google Gemini API
- [ ] –í–µ–∑–¥–µ –∏–∑–º–µ–Ω–∏–ª–∏ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —Å 384 –Ω–∞ 384
- [ ] –î–æ–±–∞–≤–∏–ª–∏ GOOGLE_API_KEY –≤ .env
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (TOP-50 ‚Üí —Ñ–∏–ª—å—Ç—Ä—ã ‚Üí TOP-10)
- [ ] –î–æ–±–∞–≤–∏–ª–∏ –≤–∑–≤–µ—à–µ–Ω–Ω—É—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ –ø–æ–ª—è–º
- [ ] –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ü–û–°–õ–ï –ø–æ–∏—Å–∫–∞

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ 4 —Ñ–∏–ª—å—Ç—Ä–∞ (–≥–æ–¥, —Ä–µ–≥–∏–æ–Ω, –æ—Ç—Ä–∞—Å–ª—å, —Å—Ç–∞—Ç—å—è)
- [ ] –î–æ–±–∞–≤–∏–ª–∏ –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (20 —Ç–µ—Å—Ç–æ–≤)
- [ ] –û–±–Ω–æ–≤–∏–ª–∏ UX-—Ç–µ–∫—Å—Ç—ã
- [ ] –£–±—Ä–∞–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ –ø–æ–∏—Å–∫–∞
- [ ] –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–æ–≤–Ω–æ 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –£–¥–∞–ª–∏—Ç—å:
- [ ] –£–¥–∞–ª–∏–ª–∏ –∫–æ–¥ —Å sentence-transformers
- [ ] –£–¥–∞–ª–∏–ª–∏ hybrid search (—Å–µ–º–∞–Ω—Ç–∏–∫–∞ + –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)
- [ ] –£–¥–∞–ª–∏–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –î–û –ø–æ–∏—Å–∫–∞
- [ ] –£–¥–∞–ª–∏–ª–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ 384

---

## üö® –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò

### 1. –ó–∞–±—ã–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å
```python
# ‚ùå –û–®–ò–ë–ö–ê: –æ—Å—Ç–∞–≤–∏–ª–∏ 384
embeddings = np.zeros((7283, 384))

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –≤–µ–∑–¥–µ 384
embeddings = np.zeros((7283, 384))
```

### 2. –§–∏–ª—å—Ç—Ä—ã –î–û –ø–æ–∏—Å–∫–∞
```python
# ‚ùå –û–®–ò–ë–ö–ê: —Å—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
filtered_docs = apply_filters(all_docs, filters)
results = search(query, filtered_docs)

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
top_50 = search(query, all_docs, limit=50)
results = apply_filters(top_50, filters)[:10]
```

### 3. –ù–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–ª–∏ –æ—Ü–µ–Ω–∫–∏
```python
# ‚ùå –û–®–ò–ë–ö–ê: –±–µ–∑ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
score = 1.0 * sim1 + 0.8 * sim2 + 0.6 * sim3

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π [0, 1]
sim1_norm = (sim1 - min_sim) / (max_sim - min_sim)
sim2_norm = (sim2 - min_sim) / (max_sim - min_sim)
sim3_norm = (sim3 - min_sim) / (max_sim - min_sim)
score = 1.0 * sim1_norm + 0.8 * sim2_norm + 0.6 * sim3_norm
```

---

## üìÇ –§–ê–ô–õ–´ –î–õ–Ø –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### Backend (–∫—Ä–∏—Ç–∏—á–Ω–æ)
```
backend/
‚îú‚îÄ‚îÄ embeddings.py          # –ó–∞–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏, —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å 384
‚îú‚îÄ‚îÄ search.py              # –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∏—Å–∫–∞
‚îú‚îÄ‚îÄ filters.py             # –§–∏–ª—å—Ç—Ä—ã –ø–æ—Å–ª–µ –ø–æ–∏—Å–∫–∞
‚îú‚îÄ‚îÄ scoring.py             # –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
‚îú‚îÄ‚îÄ database_init.py       # –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å 384 –≤ –ë–î
‚îî‚îÄ‚îÄ requirements.txt       # google-generativeai
```

### Frontend (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
```
frontend/
‚îú‚îÄ‚îÄ components/Search.jsx  # –ù–æ–≤—ã–µ UX-—Ç–µ–∫—Å—Ç—ã
‚îú‚îÄ‚îÄ components/Filters.jsx # 4 —Ñ–∏–ª—å—Ç—Ä–∞
‚îî‚îÄ‚îÄ utils/api.js           # –û–±—Ä–∞–±–æ—Ç–∫–∞ TOP-10
```

### –î–∞–Ω–Ω—ã–µ
```
data/
‚îú‚îÄ‚îÄ embeddings.npy         # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é 384
‚îî‚îÄ‚îÄ golden_standard.json   # 20 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä
```

---

## üîó –°–°–´–õ–ö–ò –ù–ê –ü–û–õ–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- **CRITICAL_UPDATE_V21.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞
- **EKATERINA_ANSWERS.md** - –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –æ—Ç –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞
- **TEAM_BRIEF_V21.md** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã, —á–µ–∫-–ª–∏—Å—Ç—ã
- **Prioritetnost-polei-dannykh.md** - –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è
- **Sistema-filtrov-i-knopok.md** - –ü–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ —Ñ–∏–ª—å—Ç—Ä—ã
- **Tekst-dlia-UX_UI.md** - –í—Å–µ UX-—Ç–µ–∫—Å—Ç—ã
- **Sozdanie-Zolotogo-standarta.md** - 20 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

**–í–µ—Ä—Å–∏—è:** 2.1  
**–î–∞—Ç–∞:** 21 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏